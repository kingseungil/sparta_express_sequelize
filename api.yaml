openapi: 3.0.0
info:
    description: This is Sparta API
    version: 1.0.0
    title: Sparta_express_sequelize
    contact:
        email: test@test.com
servers:
    - url: "http://localhost:3000"
tags:
    - name: posts
      description: ê²Œì‹œê¸€
    - name: comments
      description: ëŒ“ê¸€
    - name: user
      description: íšŒì›

paths:
    /api/signup:
        post:
            tags:
                - user
            summary: íšŒì›ê°€ì…
            description: ã…ã…‡~
            operationId: signup
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/UserRegistration"
                required: true
            responses:
                "201":
                    description: Created
                    content:
                        application/json:
                            schema:
                                properties:
                                    message:
                                        type: string
                                        example: íšŒì›ê°€ì… ì„±ê³µ~
                "400":
                    description: Bad request
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
                "412":
                    description: User already exists
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
    /api/login:
        post:
            tags:
                - user
            summary: ë¡œê·¸ì¸
            description: login
            requestBody:
                description: login
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/UserRegistration"

            responses:
                201:
                    description: Success
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/AuthApiResponse"
                412:
                    description: Fail
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"

    /api/posts:
        get:
            tags:
                - posts
            summary: ëª¨ë“  ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
            responses:
                "200":
                    description: Success
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/PostsApiResponse"
                "400":
                    description: Bad request
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"

        post:
            tags:
                - posts
            summary: ê²Œì‹œê¸€ ì‘ì„±
            description: ê²Œì‹œê¸€ ì‘ì„±
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            properties:
                                title:
                                    type: string
                                    example: ì•ˆë…•í•˜ì„¸ìš” ê²Œì‹œê¸€ ì œëª©ì…ë‹ˆë‹¤
                                content:
                                    type: string
                                    example: ì•ˆë…•í•˜ì„¸ìš” contentì…ë‹ˆë‹¤
            responses:
                201:
                    description: Success
                    content:
                        application/json:
                            schema:
                                properties:
                                    message:
                                        type: string
                                        example: ê²Œì‹œê¸€ ì‘ì„± ì„±ê³µ~
                400:
                    description: Fail
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
            security:
                - jwt_auth: []
    /api/posts/:postId:
        get:
            tags:
                - posts
            summary: íŠ¹ì • ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
            description: íŠ¹ì • ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
            parameters:
                - name: postId
                  in: query
                  description: ê²Œì‹œê¸€ ì•„ì´ë””
                  schema:
                      type: integer
            responses:
                200:
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/Post"
                400:
                    description: Fail
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
        put:
            tags:
                - posts
            summary: ê²Œì‹œê¸€ ìˆ˜ì •
            description: ê²Œì‹œê¸€ ìˆ˜ì •
            parameters:
                - name: postId
                  in: query
                  description: ê²Œì‹œê¸€ ì•„ì´ë””
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    contentType:
                        schema:
                            properties:
                                title:
                                    type: string
                                    example: ì•ˆë…•í•˜ì„¸ìš” ìˆ˜ì •ëœ ê²Œì‹œê¸€ ì œëª©ì…ë‹ˆë‹¤
                                content:
                                    type: string
                                    example: ì•ˆë…•í•˜ì„¸ìš” ìˆ˜ì •ëœ contentì…ë‹ˆë‹¤
            responses:
                200:
                    description: OK
                    content:
                        application/json:
                            schema:
                                properties:
                                    message:
                                        type: string
                                        example: ê²Œì‹œê¸€ ìˆ˜ì •ì™„ë£Œ!
                400:
                    description: Fail
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
            security:
                - jwt_auth: []
        delete:
            tags:
                - posts
            summary: ê²Œì‹œê¸€ ì‚­ì œ
            description: ê²Œì‹œê¸€ ì‚­ì œ
            parameters:
                - name: postId
                  in: query
                  description: ê²Œì‹œê¸€ ì•„ì´ë””
                  schema:
                      type: integer
            responses:
                200:
                    description: OK
                    content:
                        application/json:
                            schema:
                                properties:
                                    message:
                                        type: string
                                        example: ê²Œì‹œê¸€ ì‚­ì œì™„ë£Œ!
                400:
                    description: Fail
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
            security:
                - jwt_auth: []
    /api/comments/:postId:
        post:
            tags:
                - comments
            summary: ëŒ“ê¸€ ì‘ì„±
            description: ëŒ“ê¸€ ì‘ì„±
            parameters:
                - name: postId
                  in: query
                  description: ê²Œì‹œê¸€ ì•„ì´ë””
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            properties:
                                comment:
                                    type: string
                                    example: ì•ˆë…•í•˜ì„¸ìš” ëŒ“ê¸€ì…ë‹ˆë‹¤
            responses:
                201:
                    description: Success
                    content:
                        application/json:
                            schema:
                                properties:
                                    message:
                                        type: string
                                        example: ëŒ“ê¸€ ì‘ì„± ì„±ê³µ~
                400:
                    description: Fail
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
            security:
                - jwt_auth: []
        get:
            tags:
                - comments
            summary: í•´ë‹¹ ê²Œì‹œê¸€ ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
            description: í•´ë‹¹ ê²Œì‹œê¸€ ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
            parameters:
                - name: postId
                  in: query
                  description: ê²Œì‹œê¸€ ì•„ì´ë””
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            properties:
                                comment:
                                    type: string
                                    example: ì•ˆë…•í•˜ì„¸ìš” ëŒ“ê¸€ì…ë‹ˆë‹¤
            responses:
                201:
                    description: Success
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/CommentsApiResponse"
                400:
                    description: Fail
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
    /api/comments/:commentId:
        put:
            tags:
                - comments
            summary: ëŒ“ê¸€ ìˆ˜ì •
            description: ëŒ“ê¸€ ìˆ˜ì •
            parameters:
                - name: commentId
                  in: query
                  description: ëŒ“ê¸€ ì•„ì´ë””
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    contentType:
                        schema:
                            properties:
                                comment:
                                    type: string
                                    example: ì•ˆë…•í•˜ì„¸ìš” ìˆ˜ì •ëœ ëŒ“ê¸€ì…ë‹ˆë‹¤
            responses:
                200:
                    description: OK
                    content:
                        application/json:
                            schema:
                                properties:
                                    message:
                                        type: string
                                        example: ëŒ“ê¸€ ìˆ˜ì •ì™„ë£Œ!
                400:
                    description: Fail
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
            security:
                - jwt_auth: []
        delete:
            tags:
                - comments
            summary: ëŒ“ê¸€ ì‚­ì œ
            description: ëŒ“ê¸€ ì‚­ì œ
            parameters:
                - name: commentId
                  in: query
                  description: ëŒ“ê¸€ ì•„ì´ë””
                  schema:
                      type: integer
            responses:
                200:
                    description: OK
                    content:
                        application/json:
                            schema:
                                properties:
                                    message:
                                        type: string
                                        example: ëŒ“ê¸€ ì‚­ì œì™„ë£Œ!
                400:
                    description: Fail
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
            security:
                - jwt_auth: []
    /api/posts/:postId/like:
        post:
            tags:
                - posts
            summary: ê²Œì‹œê¸€ì— ì¢‹ì•„ìš” ëˆ„ë¥´ê¸°
            description: ê²Œì‹œê¸€ì— ì¢‹ì•„ìš” ëˆ„ë¥´ê¸°
            parameters:
                - name: postId
                  in: query
                  description: ê²Œì‹œê¸€ ì•„ì´ë””
                  schema:
                      type: integer
            responses:
                200:
                    description: OK
                    content:
                        application/json:
                            schema:
                                properties:
                                    message:
                                        type: string
                                        example: ê²Œì‹œê¸€ì— ì¢‹ì•„ìš”ë¥¼ ëˆŒë €ìŠµë‹ˆë‹¤
                400:
                    description: Fail
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
            security:
                - jwt_auth: []
    /api/posts/list/like:
        get:
            tags:
                - posts
            summary: íŠ¹ì • ìœ ì €ê°€ ì¢‹ì•„ìš” ëˆ„ë¥¸ ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
            responses:
                "200":
                    description: Success
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/PostsApiResponse"
                "400":
                    description: Bad request
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorApiResponse"
components:
    schemas:
        UserRegistration:
            type: object
            properties:
                nickname:
                    type: string
                    minLength: 3
                password:
                    type: string
                    minLength: 4
            required:
                - nickname
                - password
            example:
                username: kingseungil
                password: password
        Post:
            type: object
            properties:
                id:
                    type: integer
                    format: int64
                title:
                    type: string
                content:
                    type: string
                likes:
                    type: integer
                createdAt:
                    type: string
                    format: date-time
                    description: Creation date
                    example: "2022-12-21T08:30:20.000Z"
                updatedAt:
                    type: string
                    format: date-time
                    description: Creation date
                    example: "2022-12-22T08:30:20.000Z"
                user_id:
                    type: integer
                    format: int64
            required:
                - id
                - title
                - content
                - likes
                - createdAt
                - updatedAt
                - userId
            example:
                id: 42
                title: ìŠ¤íŒŒë¥´íƒ€
                content: ê³¼ì œ ë„ˆë¬´ ì–´ë ¤ì›Œìš©
                likes: 30
                createdAt: "2022-12-21T08:30:20.000Z"
                updatedAt: "2022-12-22T08:30:20.000Z"
                user_id: 1
        AuthApiResponse:
            type: object
            properties:
                token:
                    type: string
                username:
                    type: string
            required:
                - token
                - username
            example:
                token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
                username: kingseungil
        ErrorApiResponse:
            type: object
            properties:
                message:
                    type: string
            required:
                - message
            example:
                message: "Something went wrong ğŸ¤ª"
        PostsApiResponse:
            type: array
            items:
                $ref: "#/components/schemas/Post"
        Comments:
            type: object
            properties:
                id:
                    type: integer
                    format: int64
                comment:
                    type: string
                createdAt:
                    type: string
                    format: date-time
                    description: Creation date
                    example: "2022-12-21T08:30:20.000Z"
                updatedAt:
                    type: string
                    format: date-time
                    description: Creation date
                    example: "2022-12-22T08:30:20.000Z"
                user_id:
                    type: integer
                    format: int64
                post_id:
                    type: integer
                    format: int64
            required:
                - id
                - comment
                - createdAt
                - updatedAt
                - user_id
                - post_id
            example:
                id: 22
                comment: ê³¼ì œ ë„ˆë¬´ ì–´ë ¤ì›Œìš©
                createdAt: "2022-12-21T08:30:20.000Z"
                updatedAt: "2022-12-22T08:30:20.000Z"
                user_id: 1
                post_id: 1
        CommentsApiResponse:
            type: array
            items:
                $ref: "#/components/schemas/Comments"
    securitySchemes:
        jwt_auth:
            description: Bearer token authorization with JWT
            type: http
            scheme: bearer
            bearerFormat: JWT
